# Windows下使用说明

编译并构造Rust编译器：
这里我们已经用CMake打包好了，可以直接运行

```sh
mkdir build
cd build
cmake -G "MinGW Makefiles" -DCMAKE_C_COMPILER=gcc -DCMAKE_CXX_COMPILER=g++ ..
mingw32-make
cd ..
```



运行：
在项目根目录下运行以下命令
将会编译/input/文件夹下的testcode.txt、testcode1.txt文件中的代码，并将分析结果输出到/input/文件夹下的testresult.txt、testresult1.txt

```sh
./build/Rust_Compiler ./result/input/testcode.txt ./result/asm/output.asm > ./result/output/testresult.txt

./build/Rust_Compiler ./result/input/5.1.txt ./result/asm/5.1.asm > ./result/output/5.1.txt
./build/Rust_Compiler ./result/input/5.2.txt ./result/asm/5.2.asm > ./result/output/5.2.txt
./build/Rust_Compiler ./result/input/5.3.txt ./result/asm/5.3.asm > ./result/output/5.3.txt

./build/Rust_Compiler ./result/input/5.4.1.txt ./result/asm/5.4.1.asm > ./result/output/5.4.1.txt
./build/Rust_Compiler ./result/input/5.4.2_error.txt ./result/asm/5.4.2_error.asm > ./result/output/5.4.2_error.txt
./build/Rust_Compiler ./result/input/5.4.3.txt ./result/asm/5.4.3.asm > ./result/output/5.4.3.txt
./build/Rust_Compiler ./result/input/5.4.4_error.txt ./result/asm/5.4.4_error.asm > ./result/output/5.4.4_error.txt
```

如果要批量化运行所有的测试样例：

1. 以**管理员身份**运行powershell
2. 切换到源代码所在根目录
3. 运行
```sh
.\cmd.ps1
```
4. 如果3中出现不允许运行脚本的报错，则运行
```sh
set-executionpolicy remotesigned
```
设置权限，并输入Y允许授权
